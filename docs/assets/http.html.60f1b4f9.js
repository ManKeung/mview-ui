import{_ as p,r as o,o as c,c as i,b as n,d as t,e as s,a as e}from"./app.4d75cc36.js";const l={},u=n("h1",{id:"http\u8BF7\u6C42",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#http\u8BF7\u6C42","aria-hidden":"true"},"#"),s(" Http\u8BF7\u6C42")],-1),r={class:"custom-container tip"},d=n("p",{class:"custom-container-title"},"\u8BF4\u660E",-1),k=s("\u6B64\u63D2\u4EF6\u96C6\u6210\u81EA\u4F18\u79C0\u7684\u5F00\u6E90\u8BF7\u6C42\u5E93\uFF1A"),m={href:"https://www.quanzhan.co/luch-request/",target:"_blank",rel:"noopener noreferrer"},v=s("luch-request"),b=s("\u3002mView\u5BF9\u5176\u8FDB\u884C\u4E86\u7B80\u5355\u5C01\u88C5\u4EE5\u53CA\u8BF4\u660E\uFF0C\u5982\u6709\u4E0D\u5168\u4E4B\u5904\uFF0C \u53EF\u53C2\u8003"),h={href:"https://www.quanzhan.co/luch-request/",target:"_blank",rel:"noopener noreferrer"},f=s("luch-request"),g=s("\u5B98\u65B9\u6587\u6863\u3002"),P=e(`<p>\u8BE5\u63D2\u4EF6\u9002\u7528\u4E8E\u666E\u904D\u7684\u8BF7\u6C42\u573A\u666F\uFF0C\u652F\u6301\xB7post<code>\u3001</code>get<code>\u3001</code>put<code>\u548C</code>delete\`\uFF0C\u4EE5\u53CA\u4E0A\u4F20\u4E0B\u8F7D\u7B49\u8BF7\u6C42\uFF0C\u6709\u5982\u4E0B\u7279\u70B9\uFF1A</p><ul><li>\u57FA\u4E8EPromise\u5BF9\u8C61\u5B9E\u73B0\u66F4\u7B80\u5355\u7684request\u4F7F\u7528\u65B9\u5F0F\uFF0C\u652F\u6301\u8BF7\u6C42\u548C\u54CD\u5E94\u62E6\u622A</li><li>\u652F\u6301\u5168\u5C40\u6302\u8F7D</li><li>\u652F\u6301\u591A\u4E2A\u5168\u5C40\u914D\u7F6E\u5B9E\u4F8B</li><li>\u652F\u6301\u81EA\u5B9A\u4E49\u9A8C\u8BC1\u5668</li><li>\u652F\u6301\u6587\u4EF6\u4E0A\u4F20/\u4E0B\u8F7D</li><li>\u652F\u6301task \u64CD\u4F5C</li><li>\u652F\u6301\u81EA\u5B9A\u4E49\u53C2\u6570</li><li>\u652F\u6301\u591A\u62E6\u622A\u5668</li><li>\u5BF9\u53C2\u6570\u7684\u5904\u7406\u6BD4uni.request\u66F4\u5F3A</li></ul><h2 id="\u5E73\u53F0\u5DEE\u5F02\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u5E73\u53F0\u5DEE\u5F02\u8BF4\u660E" aria-hidden="true">#</a> \u5E73\u53F0\u5DEE\u5F02\u8BF4\u660E</h2><table><thead><tr><th style="text-align:center;">App(vue)</th><th style="text-align:center;">App(nvue)</th><th style="text-align:center;">H5</th><th style="text-align:center;">\u5C0F\u7A0B\u5E8F</th></tr></thead><tbody><tr><td style="text-align:center;">\u221A</td><td style="text-align:center;">\u221A</td><td style="text-align:center;">\u221A</td><td style="text-align:center;">\u221A</td></tr></tbody></table><h2 id="\u57FA\u672C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> \u57FA\u672C\u4F7F\u7528</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">middleware</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">head</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5168\u5C40\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u914D\u7F6E" aria-hidden="true">#</a> \u5168\u5C40\u914D\u7F6E</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span> &#39;&#39;<span class="token punctuation">,</span>
    header<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> &#39;GET&#39;<span class="token punctuation">,</span>
    dataType<span class="token operator">:</span> &#39;json&#39;<span class="token punctuation">,</span>
    <span class="token comment">// #ifndef MP-ALIPAY</span>
    responseType<span class="token operator">:</span> &#39;text&#39;<span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// \u6CE8\uFF1A\u5982\u679C\u5C40\u90E8custom\u4E0E\u5168\u5C40custom\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5219\u540E\u9762\u7684\u5C5E\u6027\u4F1A\u8986\u76D6\u524D\u9762\u7684\u5C5E\u6027\uFF0C\u76F8\u5F53\u4E8EObject.assign(\u5168\u5C40\uFF0C\u5C40\u90E8)</span>
    custom<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// \u5168\u5C40\u81EA\u5B9A\u4E49\u53C2\u6570\u9ED8\u8BA4\u503C</span>
    <span class="token comment">// #ifdef H5 || APP-PLUS || MP-ALIPAY || MP-WEIXIN</span>
    timeout<span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef APP-PLUS</span>
    sslVerify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef H5</span>
    <span class="token comment">// \u8DE8\u57DF\u8BF7\u6C42\u65F6\u662F\u5426\u643A\u5E26\u51ED\u8BC1\uFF08cookies\uFF09\u4EC5H5\u652F\u6301\uFF08HBuilderX 2.6.15+\uFF09</span>
    withCredentials<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef APP-PLUS</span>
    firstIpv4<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// DNS\u89E3\u6790\u65F6\u4F18\u5148\u4F7F\u7528ipv4 \u4EC5 App-Android \u652F\u6301 (HBuilderX 2.8.0+)</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// \u5C40\u90E8\u4F18\u5148\u7EA7\u9AD8\u4E8E\u5168\u5C40\uFF0C\u8FD4\u56DE\u5F53\u524D\u8BF7\u6C42\u7684task,options\u3002\u8BF7\u52FF\u5728\u6B64\u5904\u4FEE\u6539options\u3002\u975E\u5FC5\u586B</span>
    <span class="token comment">// getTask: (task, options) =&gt; {</span>
    <span class="token comment">// \u76F8\u5F53\u4E8E\u8BBE\u7F6E\u4E86\u8BF7\u6C42\u8D85\u65F6\u65F6\u95F4500ms</span>
    <span class="token comment">//   setTimeout(() =&gt; {</span>
    <span class="token comment">//     task.abort()</span>
    <span class="token comment">//   }, 500)</span>
    <span class="token comment">// },</span>
    <span class="token comment">// \u5168\u5C40\u81EA\u5B9A\u4E49\u9A8C\u8BC1\u5668\u3002\u53C2\u6570\u4E3AstatusCode \u4E14\u5FC5\u5B58\u5728\uFF0C\u4E0D\u7528\u5224\u65AD\u7A7A\u60C5\u51B5\u3002</span>
    validateStatus<span class="token operator">:</span> (statusCode) =&gt; <span class="token punctuation">{</span> <span class="token comment">// statusCode \u5FC5\u5B58\u5728\u3002\u6B64\u5904\u793A\u4F8B\u4E3A\u5168\u5C40\u9ED8\u8BA4\u914D\u7F6E</span>
        return statusCode &gt;= <span class="token number">200</span> &amp;&amp; statusCode &lt; <span class="token number">300</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u901A\u8FC7<code>uni.$m.http.setConfig()</code>\u65B9\u6CD5\u8FDB\u884C\u5168\u5C40\u914D\u7F6E\uFF0C\u6BD4\u5982\u914D\u7F6E\u8BF7\u6C42\u7684\u5168\u5C40\u57DF\u540D<code>baseUrl</code>\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* config \u4E3A\u9ED8\u8BA4\u5168\u5C40\u914D\u7F6E*/</span>
    config<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">https://www.example.com</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span> <span class="token comment">/* \u6839\u57DF\u540D */</span>
    <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="get\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#get\u8BF7\u6C42" aria-hidden="true">#</a> GET\u8BF7\u6C42</h2><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C<code>get</code>\u8BF7\u6C42\u4E0E<code>post</code>\u8BF7\u6C42\u7565\u6709\u4E0D\u540C\uFF0C<code>get</code>\u8BF7\u6C42\u6240\u6709\u53C2\u6570\u90FD\u5728\u65B9\u6CD5\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E2D\uFF0C\u800C<code>post</code>\u8BF7\u6C42\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E3A\u8BF7\u6C42\u53C2\u6570<code>params</code>\uFF0C\u800C\u7B2C\u4E09\u4E2A\u53C2\u6570\u624D\u4E3A\u914D\u7F6E\u9879\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u57FA\u672C\u7528\u6CD5\uFF0C\u6CE8\u610F\uFF1Aget\u8BF7\u6C42\u7684\u53C2\u6570\u4EE5\u53CA\u914D\u7F6E\u9879\u90FD\u5728\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E2D</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>params<span class="token operator">:</span> <span class="token punctuation">{</span>userName<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5C40\u90E8\u4FEE\u6539\u914D\u7F6E\uFF0C\u5C40\u90E8\u914D\u7F6E\u4F18\u5148\u7EA7\u9AD8\u4E8E\u5168\u5C40\u914D\u7F6E</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>userName<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u52A0\u5728url\u4E0A */</span>
    header<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u4E0E\u5168\u5C40header\u5408\u5E76\uFF0C\u5982\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5C40\u90E8\u8986\u76D6\u5168\u5C40 */</span>
    dataType<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u6CE8\uFF1A\u5982\u679C\u5C40\u90E8custom\u4E0E\u5168\u5C40custom\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5219\u540E\u9762\u7684\u5C5E\u6027\u4F1A\u8986\u76D6\u524D\u9762\u7684\u5C5E\u6027\uFF0C\u76F8\u5F53\u4E8EObject.assign(\u5168\u5C40\uFF0C\u5C40\u90E8)</span>
    custom<span class="token operator">:</span> <span class="token punctuation">{</span>auth<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// \u53EF\u4EE5\u52A0\u4E00\u4E9B\u81EA\u5B9A\u4E49\u53C2\u6570\uFF0C\u5728\u62E6\u622A\u5668\u7B49\u5730\u65B9\u4F7F\u7528\u3002\u6BD4\u5982\u8FD9\u91CC\u6211\u52A0\u4E86\u4E00\u4E2Aauth\uFF0C\u53EF\u5728\u62E6\u622A\u5668\u91CC\u62FF\u5230\uFF0C\u5982\u679Ctrue\u5C31\u4F20token</span>
    <span class="token comment">// #ifndef MP-ALIPAY</span>
    responseType<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef H5 || APP-PLUS || MP-ALIPAY || MP-WEIXIN</span>
    timeout<span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span> <span class="token comment">// H5(HBuilderX 2.9.9+)\u3001APP(HBuilderX 2.9.9+)\u3001\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\uFF082.10.0\uFF09\u3001\u652F\u4ED8\u5B9D\u5C0F\u7A0B\u5E8F</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef APP-PLUS</span>
    sslVerify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u9A8C\u8BC1 ssl \u8BC1\u4E66 \u4EC55+App\u5B89\u5353\u7AEF\u652F\u6301\uFF08HBuilderX 2.3.3+\uFF09</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef APP-PLUS</span>
    firstIpv4<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// DNS\u89E3\u6790\u65F6\u4F18\u5148\u4F7F\u7528ipv4 \u4EC5 App-Android \u652F\u6301 (HBuilderX 2.8.0+)</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef H5</span>
    withCredentials<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u8DE8\u57DF\u8BF7\u6C42\u65F6\u662F\u5426\u643A\u5E26\u51ED\u8BC1\uFF08cookies\uFF09\u4EC5H5\u652F\u6301\uFF08HBuilderX 2.6.15+\uFF09</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// \u8FD4\u56DE\u5F53\u524D\u8BF7\u6C42\u7684task, options\u3002\u8BF7\u52FF\u5728\u6B64\u5904\u4FEE\u6539options\u3002\u975E\u5FC5\u586B</span>
    <span class="token function-variable function">getTask</span><span class="token operator">:</span> <span class="token punctuation">(</span>task<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// \u76F8\u5F53\u4E8E\u8BBE\u7F6E\u8D85\u65F6\u65F6\u95F4500ms</span>
         <span class="token comment">// setTimeout(() =&gt; {</span>
         <span class="token comment">//   task.abort()</span>
         <span class="token comment">// }, 500)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//validateStatus: (statusCode) =&gt; { // statusCode \u5FC5\u5B58\u5728\u3002\u6B64\u5904\u793A\u4F8B\u4E3A\u5168\u5C40\u9ED8\u8BA4\u914D\u7F6E\u3002\u6F14\u793A\uFF0C\u975E\u5FC5\u586B\u9009\u9879</span>
	<span class="token comment">//	return statusCode &gt;= 200 &amp;&amp; statusCode &lt; 300</span>
	<span class="token comment">//}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="post\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#post\u8BF7\u6C42" aria-hidden="true">#</a> POST\u8BF7\u6C42</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u57FA\u672C\u7528\u6CD5\uFF0C\u6CE8\u610F\uFF1Apost\u7684\u7B2C\u4E09\u4E2A\u53C2\u6570\u624D\u4E3A\u914D\u7F6E\u9879</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/user/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>userName<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5C40\u90E8\u4FEE\u6539\u914D\u7F6E\uFF0C\u5C40\u90E8\u914D\u7F6E\u4F18\u5148\u7EA7\u9AD8\u4E8E\u5168\u5C40\u914D\u7F6E</span>
uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/user/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>userName<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u52A0\u5728url\u4E0A */</span>
    header<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u4E0E\u5168\u5C40header\u5408\u5E76\uFF0C\u5982\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5C40\u90E8\u8986\u76D6\u5168\u5C40 */</span>
    dataType<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u6CE8\uFF1A\u5982\u679C\u5C40\u90E8custom\u4E0E\u5168\u5C40custom\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5219\u540E\u9762\u7684\u5C5E\u6027\u4F1A\u8986\u76D6\u524D\u9762\u7684\u5C5E\u6027\uFF0C\u76F8\u5F53\u4E8EObject.assign(\u5168\u5C40\uFF0C\u5C40\u90E8)</span>
    custom<span class="token operator">:</span> <span class="token punctuation">{</span>auth<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// \u53EF\u4EE5\u52A0\u4E00\u4E9B\u81EA\u5B9A\u4E49\u53C2\u6570\uFF0C\u5728\u62E6\u622A\u5668\u7B49\u5730\u65B9\u4F7F\u7528\u3002\u6BD4\u5982\u8FD9\u91CC\u6211\u52A0\u4E86\u4E00\u4E2Aauth\uFF0C\u53EF\u5728\u62E6\u622A\u5668\u91CC\u62FF\u5230\uFF0C\u5982\u679Ctrue\u5C31\u4F20token</span>
    <span class="token comment">// #ifndef MP-ALIPAY</span>
    responseType<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef H5 || APP-PLUS || MP-ALIPAY || MP-WEIXIN</span>
    timeout<span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span> <span class="token comment">// H5(HBuilderX 2.9.9+)\u3001APP(HBuilderX 2.9.9+)\u3001\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\uFF082.10.0\uFF09\u3001\u652F\u4ED8\u5B9D\u5C0F\u7A0B\u5E8F</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef APP-PLUS</span>
    sslVerify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u9A8C\u8BC1 ssl \u8BC1\u4E66 \u4EC55+App\u5B89\u5353\u7AEF\u652F\u6301\uFF08HBuilderX 2.3.3+\uFF09</span>
    <span class="token comment">// #endif</span>
   <span class="token comment">// #ifdef APP-PLUS</span>
    firstIpv4<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// DNS\u89E3\u6790\u65F6\u4F18\u5148\u4F7F\u7528ipv4 \u4EC5 App-Android \u652F\u6301 (HBuilderX 2.8.0+)</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifdef H5</span>
    withCredentials<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u8DE8\u57DF\u8BF7\u6C42\u65F6\u662F\u5426\u643A\u5E26\u51ED\u8BC1\uFF08cookies\uFF09\u4EC5H5\u652F\u6301\uFF08HBuilderX 2.6.15+\uFF09</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// \u8FD4\u56DE\u5F53\u524D\u8BF7\u6C42\u7684task, options\u3002\u8BF7\u52FF\u5728\u6B64\u5904\u4FEE\u6539options\u3002\u975E\u5FC5\u586B</span>
    <span class="token function-variable function">getTask</span><span class="token operator">:</span> <span class="token punctuation">(</span>task<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// \u76F8\u5F53\u4E8E\u8BBE\u7F6E\u8D85\u65F6\u65F6\u95F4500ms</span>
         <span class="token comment">// setTimeout(() =&gt; {</span>
         <span class="token comment">//   task.abort()</span>
         <span class="token comment">// }, 500)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//validateStatus: (statusCode) =&gt; { // statusCode \u5FC5\u5B58\u5728\u3002\u6B64\u5904\u793A\u4F8B\u4E3A\u5168\u5C40\u9ED8\u8BA4\u914D\u7F6E\u3002\u6F14\u793A\uFF0C\u975E\u5FC5\u586B\u9009\u9879</span>
  	<span class="token comment">//	return statusCode &gt;= 200 &amp;&amp; statusCode &lt; 300</span>
  	<span class="token comment">//}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="upload\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#upload\u8BF7\u6C42" aria-hidden="true">#</a> UPLOAD\u8BF7\u6C42</h2>`,16),_=s("\u5177\u4F53\u53C2\u6570\u8BF4\u660E\uFF1A"),y={href:"https://uniapp.dcloud.io/api/request/network-file.html",target:"_blank",rel:"noopener noreferrer"},A=s("uni.uploadFile"),x=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token string">&#39;api/download&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u52A0\u5728url\u4E0A */</span>
    <span class="token comment">// #ifdef H5 || APP-PLUS</span>
    timeout<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// H5(HBuilderX 2.9.9+)\u3001APP(HBuilderX 2.9.9+)</span>
    <span class="token comment">// #endif</span>
    header<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* \u4F1A\u4E0E\u5168\u5C40header\u5408\u5E76\uFF0C\u5982\u6709\u540C\u540D\u5C5E\u6027\uFF0C\u5C40\u90E8\u8986\u76D6\u5168\u5C40 */</span>
    custom<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// \u81EA\u5B9A\u4E49\u53C2\u6570</span>
    <span class="token comment">// \u8FD4\u56DE\u5F53\u524D\u8BF7\u6C42\u7684task, options\u3002\u975E\u5FC5\u586B</span>
    <span class="token function-variable function">getTask</span><span class="token operator">:</span> <span class="token punctuation">(</span>task<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// setTimeout(() =&gt; {</span>
		<span class="token comment">//   task.abort()</span>
		<span class="token comment">// }, 500)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//validateStatus: (statusCode) =&gt; { // statusCode \u5FC5\u5B58\u5728\u3002\u6B64\u5904\u793A\u4F8B\u4E3A\u5168\u5C40\u9ED8\u8BA4\u914D\u7F6E\u3002\u6F14\u793A\uFF0C\u975E\u5FC5\u586B\u9009\u9879</span>
   	<span class="token comment">//	return statusCode &gt;= 200 &amp;&amp; statusCode &lt; 300</span>
   	<span class="token comment">//}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8BF7\u6C42\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u62E6\u622A\u5668" aria-hidden="true">#</a> \u8BF7\u6C42\u62E6\u622A\u5668</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// \u53EF\u4F7F\u7528async await \u505A\u5F02\u6B65\u64CD\u4F5C</span>
	config<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token operator">...</span>config<span class="token punctuation">.</span>header<span class="token punctuation">,</span>
		a<span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// \u6F14\u793A\u62E6\u622A\u5668header\u52A0\u53C2</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u6F14\u793Acustom \u7528\u5904</span>
	<span class="token comment">// if (config.custom.auth) {</span>
	<span class="token comment">//   config.header.token = &#39;token&#39;</span>
	<span class="token comment">// }</span>
	<span class="token comment">// if (config.custom.loading) {</span>
	<span class="token comment">//  uni.showLoading()</span>
	<span class="token comment">// }</span>
	<span class="token comment">// \u6F14\u793A</span>
	<span class="token comment">// if (!token) { // \u5982\u679Ctoken\u4E0D\u5B58\u5728\uFF0Creturn Promise.reject(config) \u4F1A\u53D6\u6D88\u672C\u6B21\u8BF7\u6C42</span>
	<span class="token comment">// 	return Promise.reject(config)</span>
	<span class="token comment">// }</span>
	<span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// \u53EF\u4F7F\u7528async await \u505A\u5F02\u6B65\u64CD\u4F5C</span>
	<span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u54CD\u5E94\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#\u54CD\u5E94\u62E6\u622A\u5668" aria-hidden="true">#</a> \u54CD\u5E94\u62E6\u622A\u5668</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>uni<span class="token punctuation">.</span>$m<span class="token punctuation">.</span>http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">/* \u5BF9\u54CD\u5E94\u6210\u529F\u505A\u70B9\u4EC0\u4E48 \u53EF\u4F7F\u7528async await \u505A\u5F02\u6B65\u64CD\u4F5C*/</span>
	<span class="token comment">// if (response.data.code !== 200) { // \u670D\u52A1\u7AEF\u8FD4\u56DE\u7684\u72B6\u6001\u7801\u4E0D\u7B49\u4E8E200\uFF0C\u5219reject()</span>
	<span class="token comment">//    	return Promise.reject(response) // return Promise.reject \u53EF\u4F7Fpromise\u72B6\u6001\u8FDB\u5165catch</span>
	<span class="token comment">// if (response.config.custom.verification) { // \u6F14\u793A\u81EA\u5B9A\u4E49\u53C2\u6570\u7684\u4F5C\u7528</span>
	<span class="token comment">//   	return response.data</span>
	<span class="token comment">// }</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
	<span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">/*  \u5BF9\u54CD\u5E94\u9519\u8BEF\u505A\u70B9\u4EC0\u4E48 \uFF08statusCode !== 200\uFF09*/</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function w(H,C){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("div",r,[d,n("p",null,[k,n("a",m,[v,t(a)]),b,n("a",h,[f,t(a)]),g])]),P,n("p",null,[_,n("a",y,[A,t(a)])]),x])}var $=p(l,[["render",w],["__file","http.html.vue"]]);export{$ as default};
