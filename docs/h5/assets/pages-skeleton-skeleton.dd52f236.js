import{_ as t}from"./m-common.a209cd3a.js";import{d as e,r as a,x as s,l as i,y as r,o as n,c as l,w as o,n as d,m,u,q as p,a as _,e as h,f as c,F as w,s as g,A as f,k as y,b as k,g as v,h as $}from"./index.1977e9bd.js";import{a as x}from"./m-status-bar.25face9c.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import"./m-navbar.81e9e845.js";var S={loading:{type:Boolean,default:x("skeleton","loading")},animate:{type:Boolean,default:x("skeleton","animate")},rows:{type:[String,Number],default:x("skeleton","rows")},rowsWidth:{type:[String,Number,Array],default:x("skeleton","rowsWidth")},rowsHeight:{type:[String,Number,Array],default:x("skeleton","rowsHeight")},title:{type:Boolean,default:x("skeleton","title")},titleWidth:{type:[String,Number],default:x("skeleton","titleWidth")},titleHeight:{type:[String,Number],default:x("skeleton","titleHeight")},avatar:{type:Boolean,default:x("skeleton","avatar")},avatarSize:{type:[String,Number],default:x("skeleton","avatarSize")},avatarShape:{type:String,default:x("skeleton","avatarShape")}};var W=b(e({__name:"m-skeleton",props:S,setup(t){const e=t,k=a(0),v=f();s((()=>{!async function(){await uni.$m.sleep(20),r().in(v).select(".m-skeleton__wrapper__content").boundingClientRect((t=>{k.value=t.width})).exec()}()}));const $=i((()=>({height:uni.$m.addUnit(e.avatarSize),width:uni.$m.addUnit(e.avatarSize)}))),x=i((()=>{let t=0;return t=/%$/.test(e.titleWidth)?uni.$m.addUnit(k.value*parseInt(e.titleWidth)/100):uni.$m.addUnit(e.titleWidth),{width:uni.$m.addUnit(t),height:uni.$m.addUnit(e.titleHeight)}})),b=i((()=>t=>({width:t.width,height:t.height,marginTop:t.marginTop}))),S=i((()=>{/%$/.test(e.rowsHeight)&&console.error("rowsHeight参数不支持百分比单位");const t=[];let a="";uni.$m.test.string(e.rowsWidth)&&(a=e.rowsWidth.replace(/[0-9]/g,"")),a||(a="px");for(let s=0;s<e.rows;s++){let i={},r=uni.$m.test.array(e.rowsWidth)?e.rowsWidth[s]||(s===e.row-1?"70%":"100%"):s===e.rows-1?.7*Number.parseFloat(e.rowsWidth)+a:e.rowsWidth,n=uni.$m.test.array(e.rowsHeight)?e.rowsHeight[s]||"18px":e.rowsHeight;i.marginTop=e.title||0!==s?e.title&&0===s?"20px":"12px":0,/%$/.test(r)?i.width=uni.$m.addUnit(k.value*Number.parseInt(r)/100):i.width=uni.$m.addUnit(r),i.height=uni.$m.addUnit(n),t.push(i)}return t}));return(t,a)=>{const s=y;return n(),l(s,{class:"m-skeleton"},{default:o((()=>[e.loading?(n(),l(s,{key:0,class:"m-skeleton__wrapper",style:{display:"flex","flex-direction":"row"}},{default:o((()=>[e.avatar?(n(),l(s,{key:0,class:d(["m-skeleton__wrapper__avatar",[`m-skeleton__wrapper__avatar--${e.avatarShape}`,e.animate&&"animate"]]),style:m(u($))},null,8,["class","style"])):p("",!0),_(s,{class:"m-skeleton__wrapper__content",ref:"m-skeleton__wrapper__content",style:{flex:"1"}},{default:o((()=>[e.title?(n(),l(s,{key:0,class:d(["m-skeleton__wrapper__content__title",[e.animate&&"animate"]]),style:m(u(x))},null,8,["style","class"])):p("",!0),(n(!0),h(w,null,c(u(S),((t,a)=>(n(),l(s,{class:d(["m-skeleton__wrapper__content__rows",[e.animate&&"animate"]]),key:a,style:m(u(b)(t))},null,8,["class","style"])))),128))])),_:1},512)])),_:1})):g(t.$slots,"default",{key:1},void 0,!0)])),_:3})}}}),[["__scopeId","data-v-0d185270"]]);var H=b({data:()=>({}),methods:{}},[["render",function(e,a,s,i,r,d){const m=v($("m-common"),t),u=y,p=v($("m-skeleton"),W);return n(),l(u,{class:"page"},{default:o((()=>[_(m,{title:"骨架屏"}),_(u,{class:"txt"},{default:o((()=>[k(" 基本使用 ")])),_:1}),_(p,{loading:"",title:"",animate:!1,rows:"3"}),_(u,{class:"txt"},{default:o((()=>[k(" 不使用动画 ")])),_:1}),_(p,{loading:"",animate:!1}),_(u,{class:"txt"},{default:o((()=>[k(" 显示头像 ")])),_:1}),_(p,{loading:"",avatar:"",rows:"2"})])),_:1})}],["__scopeId","data-v-305aa1ba"]]);export{H as default};
//# sourceMappingURL=pages-skeleton-skeleton.dd52f236.js.map
