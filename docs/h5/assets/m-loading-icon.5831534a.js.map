{"version":3,"file":"m-loading-icon.5831534a.js","sources":["../../../../../uni_modules/mview-ui/components/m-loading-icon/props.ts","../../../../../uni_modules/mview-ui/components/m-loading-icon/m-loading-icon.vue"],"sourcesContent":["import { getCommon, getDefault } from '../props'\n\nexport default {\n    ...getCommon(),\n    // 是否显示组件\n    show: {\n        type: Boolean,\n        default: getDefault('loadingIcon', 'show')\n    },\n    // 颜色\n    color: {\n        type: String,\n        default: getDefault('loadingIcon', 'color')\n    },\n    // 提示文字颜色\n    textColor: {\n        type: String,\n        default: getDefault('loadingIcon', 'textColor')\n    },\n    // 文字和图标是否垂直排列\n    vertical: {\n        type: Boolean,\n        default: getDefault('loadingIcon', 'vertical')\n    },\n    // 模式选择，circle-圆形，spinner-花朵形，semicircle-半圆形\n    mode: {\n        type: String,\n        default: getDefault('loadingIcon', 'mode')\n    },\n    // 图标大小，单位默认px\n    size: {\n        type: [String, Number],\n        default: getDefault('loadingIcon', 'size')\n    },\n    // 文字大小\n    textSize: {\n        type: [String, Number],\n        default: getDefault('loadingIcon', 'textSize')\n    },\n    // 文字内容\n    text: {\n        type: [String, Number],\n        default: getDefault('loadingIcon', 'text')\n    },\n    // 动画模式\n    timingFunction: {\n        type: String,\n        default: getDefault('loadingIcon', 'timingFunction')\n    },\n    // 动画执行周期时间\n    duration: {\n        type: [String, Number],\n        default: getDefault('loadingIcon', 'duration')\n    },\n    // mode=circle时的暗边颜色\n    inactiveColor: {\n        type: String,\n        default: getDefault('loadingIcon', 'inactiveColor')\n    }\n}\n","<template>\n    <view\n        class=\"m-loading-icon\"\n        :class=\"[props.vertical && 'm-loading-icon--vertical']\"\n        v-if=\"props.show\"\n    >\n        <!-- 'spinner', 'semicircle', 'circle' -->\n        <view\n            v-if=\"!webviewHide && ['spinner', 'semicircle', 'circle'].indexOf(props.mode) !== -1\"\n            class=\"m-loading-icon__spinner\"\n            :class=\"[`m-loading-icon__spinner--${props.mode}`]\"\n            :style=\"spinnerStyle\"\n        >\n            <block v-if=\"mode === 'spinner'\">\n                <view class=\"m-loading-icon__dot\" v-for=\"(_item, index) in 12\" :key=\"index\">\n                </view>\n            </block>\n        </view>\n        <!-- bicircle -->\n        <view  v-if=\"!webviewHide && props.mode === 'bicircle'\" class=\"m-loading-icon__bicircle\" :style=\"bicircleStyle\">\n            <view class=\"m-loading-icon__bicircle--left\" :style=\"bicircleItemStyle('left')\"></view>\n            <view class=\"m-loading-icon__bicircle--right\" :style=\"bicircleItemStyle('right')\"></view>\n        </view>\n        <!-- default -->\n        <view v-if=\"!webviewHide && props.mode === 'default'\" class=\"m-loading-icon__default\" :style=\"defaultStyle\">\n            <view v-for=\"(_item, index) in 4\" :key=\"index\" class=\"m-loading-icon__default--item\" :style=\"defaultItemStyle\">\n            </view>\n        </view>\n        <text v-if=\"props.text\" class=\"m-loading-icon__text\" :style=\"textStyle\"> {{ props.text }} </text>\n    </view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, computed, onMounted } from 'vue'\nimport Props from './props'\n\nconst props = defineProps(Props)\n// 监听webview的状态，如果隐藏了页面，则停止动画，以免性能消耗\nconst webviewHide = ref(false)\n\nonMounted(() => {\n    init()\n})\n\nconst customStyle = computed(() => {\n    return uni.$m.addStyle(props.customStyle)\n})\n\nconst otherBorderColor = computed(() => {\n    const lightColor = uni.$m.color.colorGradient(props.color, '#ffffff', 100)[80]\n\n    if (props.mode === 'circle') {\n        return props.inactiveColor ? props.inactiveColor : lightColor\n    }\n\n    return 'transparent'\n})\n\nconst spinnerStyle = computed(() => {\n    return {\n        color: props.color,\n        width: uni.$m.addUnit(props.size),\n        height: uni.$m.addUnit(props.size),\n        borderTopColor: props.color,\n        borderBottomColor: otherBorderColor.value,\n        borderLeftColor: otherBorderColor.value,\n        borderRightColor: otherBorderColor.value,\n        'animation-duration': `${props.duration}ms`,\n        'animation-timing-function': props.mode === 'semicircle' || props.mode === 'circle' ? props.timingFunction : ''\n    }\n})\n\nconst textStyle = computed(() => {\n    return {\n        fontSize: uni.$m.addUnit(props.textSize),\n        color: props.textColor,\n        paddingLeft: props.vertical ? '' : '4px'\n    }\n})\n\n// ----------- bicircle -----------\nconst bicircleStyle = computed(() => {\n    const size = Number.parseFloat(props.size + '')\n\n    return {\n        width: `${size * 3}px`,\n        height: `${size}px`\n    }\n})\n\nconst bicircleItemStyle = computed(() => {\n    return item => {\n        const size = Number.parseFloat(props.size + '')\n        const style = {\n            width: `${size}px`,\n            height: `${size}px`,\n            animationDuration: `${props.duration}ms`\n        }\n\n        if (item === 'left') {\n            style.background = props.color === '#909399' ? '#3c9cff' : props.color\n        } else {\n            style.background = props.inactiveColor === '' ? '#0ff' : props.inactiveColor\n        }\n\n        return style\n    }\n})\n\n// default\nconst defaultStyle = computed(() => {\n    const size = Number.parseFloat(props.size + '')\n\n    return {\n        width: `${size * 2.5}px`,\n        height: `${size * 2.5}px`,\n        animationDuration: `${props.duration}ms`\n    }\n})\n\nconst defaultItemStyle = computed(() => {\n    const size = Number.parseFloat(props.size + '')\n\n    return {\n        width: `${size}px`,\n        height: `${size}px`,\n        'background-color': props.color === '#909399' ? '#3c9cff' : props.color\n    }\n})\n\nfunction init() {\n    setTimeout(() => {\n        // #ifdef APP-PLUS\n        props.show && addEventListenerToWebview()\n        // #endif\n    }, 20)\n}\n\n// 监听webview的显示与隐藏\nfunction addEventListenerToWebview() {\n    // webview的堆栈\n    const pages = getCurrentPages()\n    // 当前页面\n    const page = pages[pages.length - 1]\n    // 当前页面的webview实例\n    const currentWebview = page.$getAppWebview()\n    // 监听webview的显示与隐藏，从而停止或者开始动画(为了性能)\n    currentWebview.addEventListener('hide', () => {\n        webviewHide.value = true\n    })\n    currentWebview.addEventListener('show', () => {\n        webviewHide.value = false\n    })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../libs/css/components.scss\";\n$m-loadidng-icon-color: #c8c9cc !default;\n$m-loading-width: 30px !default;\n$m-loading-height: 30px !default;\n$m-loading-max-width: 100% !default;\n$m-loading-max-height: 100% !default;\n$m-loading-semicircle-border-width: 2px !default;\n$m-loading-semicircle-border-color: transparent !default;\n$m-loading-semicircle-border-top-right-radius: 100px !default;\n$m-loading-semicircle-border-top-left-radius: 100px !default;\n$m-loading-semicircle-border-bottom-left-radius: 100px !default;\n$m-loading-semicircle-border-bottom-right-radiu: 100px !default;\n$m-loading-semicircle-border-style: solid !default;\n$m-loading-icon-text-margin-left: 4px !default;\n$m-loading-icon-text-color: $m-content-color !default;\n$m-loading-icon-text-font-size: 14px !default;\n$m-loading-icon-text-line-height: 20px !default;\n$m-loading-icon-vertical-margin: 6px 0 0 !default;\n$m-loading-icon-host-font-size: 0px !default;\n$m-loading-icon-host-line-height: 1 !default;\n$m-loading-icon-dot-top: 0 !default;\n$m-loading-icon-dot-left: 0 !default;\n$m-loading-icon-dot-width: 100% !default;\n$m-loading-icon-dot-height: 100% !default;\n$m-loading-icon-dot-before-width: 2px !default;\n$m-loading-icon-dot-before-height: 25% !default;\n$m-loading-icon-dot-before-margin: 0 auto !default;\n$m-loading-icon-dot-before-background-color: currentColor !default;\n$m-loading-icon-dot-before-border-radius: 40% !default;\n$m-loading-bicircle-left-color: #3c9cff !default;\n$m-loading-bicircle-right-color: #0ff !default;\n$m-loading-default-size: 10px !default;\n\n.m-loading-icon {\n    @include flex;\n    align-items: center;\n    justify-content: center;\n    color: $m-loadidng-icon-color;\n\n    &__text {\n        margin-left: $m-loading-icon-text-margin-left;\n        color: $m-loading-icon-text-color;\n        font-size: $m-loading-icon-text-font-size;\n        line-height: $m-loading-icon-text-line-height;\n    }\n\n    &--vertical {\n        flex-direction: column\n    }\n\n    &__spinner {\n        width: $m-loading-width;\n        height: $m-loading-height;\n        position: relative;\n        /* #ifndef APP-NVUE */\n        box-sizing: border-box;\n        max-width: $m-loading-max-width;\n        max-height: $m-loading-max-height;\n        animation: m-rotate 1s linear infinite;\n        /* #endif */\n    }\n\n    &__spinner--semicircle,\n    &__spinner--circle {\n        border-width: $m-loading-semicircle-border-width;\n        border-color: $m-loading-semicircle-border-color;\n        border-top-right-radius: $m-loading-semicircle-border-top-right-radius;\n        border-top-left-radius: $m-loading-semicircle-border-top-left-radius;\n        border-bottom-left-radius: $m-loading-semicircle-border-bottom-left-radius;\n        border-bottom-right-radius: $m-loading-semicircle-border-bottom-right-radiu;\n        border-style: $m-loading-semicircle-border-style;\n    }\n}\n\n/* #ifndef APP-NVUE */\n\n:host {\n    font-size: $m-loading-icon-host-font-size;\n    line-height: $m-loading-icon-host-line-height;\n}\n\n.m-loading-icon {\n    &__text:empty {\n        display: none\n    }\n\n    &--vertical &__text {\n        margin: $m-loading-icon-vertical-margin;\n        color: $m-content-color;\n    }\n\n    &__spinner--spinner {\n        animation-timing-function: steps(12)\n    }\n\n    &__dot {\n        position: absolute;\n        top: $m-loading-icon-dot-top;\n        left: $m-loading-icon-dot-left;\n        width: $m-loading-icon-dot-width;\n        height: $m-loading-icon-dot-height;\n\n        &:before {\n            display: block;\n            width: $m-loading-icon-dot-before-width;\n            height: $m-loading-icon-dot-before-height;\n            margin: $m-loading-icon-dot-before-margin;\n            background-color: $m-loading-icon-dot-before-background-color;\n            border-radius: $m-loading-icon-dot-before-border-radius;\n            content: \" \"\n        }\n    }\n\n    &__bicircle {\n        display: block;\n        position: relative;\n        width: 80rpx;\n        height: 80rpx;\n\n        &--left,\n        &--right {\n            width: 28rpx;\n            height: 28rpx;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            background: $m-loading-bicircle-left-color;\n            border-radius: 50%;\n            transform: translate(-50%, -50%);\n        }\n\n        &--left {\n            left: 20%;\n            animation: m-left 1s ease infinite;\n        }\n\n        &--right {\n            left: 80%;\n            animation: m-right 1s ease infinite;\n            background: $m-loading-bicircle-right-color;\n        }\n    }\n\n    &__default {\n        position: relative;\n        width: $m-loading-default-size * 2.5;\n        height: $m-loading-default-size * 2.5;\n        animation: m-rotate 1.2s infinite linear;\n\n        &--item {\n            position: absolute;\n            display: inline-block;\n            width: $m-loading-default-size;\n            height: $m-loading-default-size;\n            border-radius: 50%;\n            background-color: $m-primary;\n\n            &:nth-of-type(1) {\n                top: 0;\n                left: 0;\n                opacity: 1;\n            }\n\n            &:nth-of-type(2) {\n                top: 0;\n                right: 0;\n                opacity: 0.8;\n            }\n\n            &:nth-of-type(3) {\n                bottom: 0;\n                right: 0;\n                opacity: 0.6;\n            }\n\n            &:nth-of-type(4) {\n                bottom: 0;\n                left: 0;\n                opacity: 0.4;\n            }\n        }\n    }\n}\n\n@for $i from 1 through 12 {\n    .m-loading-icon__dot:nth-of-type(#{$i}) {\n        transform: rotate($i * 30deg);\n        opacity: 1 - 0.0625 * ($i - 1);\n    }\n}\n\n@keyframes m-rotate {\n    0% {\n        transform: rotate(0deg)\n    }\n\n    to {\n        transform: rotate(1turn)\n    }\n}\n\n@keyframes m-left {\n    0% {\n        left: 20%;\n    }\n    50% {\n        left: 50%;\n    }\n    100% {\n        left: 20%;\n    }\n}\n\n@keyframes m-right {\n    0% {\n        left: 80%;\n    }\n    50% {\n        left: 50%;\n    }\n    100% {\n        left: 80%;\n    }\n}\n\n\n// @keyframes m-default {\n//     0% {\n//         transform: rotate(0deg);\n//     }\n\n//     100% {\n//         transform: rotate(360deg);\n//     }\n// }\n/* #endif */\n</style>\n"],"names":["getCommon","show","type","Boolean","default","getDefault","color","String","textColor","vertical","mode","size","Number","textSize","text","timingFunction","duration","inactiveColor","webviewHide","ref","uni","$m","addStyle","props","customStyle","otherBorderColor","computed","lightColor","colorGradient","spinnerStyle","width","addUnit","height","borderTopColor","borderBottomColor","value","borderLeftColor","borderRightColor","textStyle","fontSize","paddingLeft","bicircleStyle","parseFloat","bicircleItemStyle","style","animationDuration","background","item","defaultStyle","defaultItemStyle"],"mappings":"6iBAEA,oIACOA,OADQ,CAGXC,KAAM,CACFC,KAAMC,QACNC,QAASC,EAAW,cAAe,SAGvCC,MAAO,CACHJ,KAAMK,OACNH,QAASC,EAAW,cAAe,UAGvCG,UAAW,CACPN,KAAMK,OACNH,QAASC,EAAW,cAAe,cAGvCI,SAAU,CACNP,KAAMC,QACNC,QAASC,EAAW,cAAe,aAGvCK,KAAM,CACFR,KAAMK,OACNH,QAASC,EAAW,cAAe,SAGvCM,KAAM,CACFT,KAAM,CAACK,OAAQK,QACfR,QAASC,EAAW,cAAe,SAGvCQ,SAAU,CACNX,KAAM,CAACK,OAAQK,QACfR,QAASC,EAAW,cAAe,aAGvCS,KAAM,CACFZ,KAAM,CAACK,OAAQK,QACfR,QAASC,EAAW,cAAe,SAGvCU,eAAgB,CACZb,KAAMK,OACNH,QAASC,EAAW,cAAe,mBAGvCW,SAAU,CACNd,KAAM,CAACK,OAAQK,QACfR,QAASC,EAAW,cAAe,aAGvCY,cAAe,CACXf,KAAMK,OACNH,QAASC,EAAW,cAAe,4FCnBrCa,EAAcC,GAAI,MAEd,iBA2FK,QAIR,UA3FsB,IAClBC,IAAIC,GAAGC,SAASC,EAAMC,qBAG3BC,EAAmBC,GAAS,WACxBC,EAAaP,IAAIC,GAAGf,MAAMsB,cAAcL,EAAMjB,MAAO,UAAW,KAAK,UAExD,WAAfiB,EAAMb,KACCa,EAAMN,cAAgBM,EAAMN,cAAgBU,EAGhD,iBAGLE,EAAeH,GAAS,KACnB,CACHpB,MAAOiB,EAAMjB,MACbwB,MAAOV,IAAIC,GAAGU,QAAQR,EAAMZ,MAC5BqB,OAAQZ,IAAIC,GAAGU,QAAQR,EAAMZ,MAC7BsB,eAAgBV,EAAMjB,MACtB4B,kBAAmBT,EAAiBU,MACpCC,gBAAiBX,EAAiBU,MAClCE,iBAAkBZ,EAAiBU,MACnC,qBAAsB,GAAGZ,EAAMP,aAC/B,4BAA4C,eAAfO,EAAMb,MAAwC,WAAfa,EAAMb,KAAoBa,EAAMR,eAAiB,OAI/GuB,EAAYZ,GAAS,KAChB,CACHa,SAAUnB,IAAIC,GAAGU,QAAQR,EAAMV,UAC/BP,MAAOiB,EAAMf,UACbgC,YAAajB,EAAMd,SAAW,GAAK,UAKrCgC,EAAgBf,GAAS,WACrBf,EAAOC,OAAO8B,WAAWnB,EAAMZ,KAAO,UAErC,CACHmB,MAAiB,EAAPnB,EAAH,KACPqB,OAAQ,GAAGrB,UAIbgC,EAAoBjB,GAAS,cAErBf,EAAOC,OAAO8B,WAAWnB,EAAMZ,KAAO,IACtCiC,EAAQ,CACVd,MAAO,GAAGnB,MACVqB,OAAQ,GAAGrB,MACXkC,kBAAmB,GAAGtB,EAAMP,uBAItB8B,WADG,SAATC,EACmC,YAAhBxB,EAAMjB,MAAsB,UAAYiB,EAAMjB,MAEtB,KAAxBiB,EAAMN,cAAuB,OAASM,EAAMN,cAG5D2B,KAKTI,EAAetB,GAAS,WACpBf,EAAOC,OAAO8B,WAAWnB,EAAMZ,KAAO,UAErC,CACHmB,MAAiB,IAAPnB,EAAH,KACPqB,OAAkB,IAAPrB,EAAH,KACRkC,kBAAmB,GAAGtB,EAAMP,iBAI9BiC,EAAmBvB,GAAS,WACxBf,EAAOC,OAAO8B,WAAWnB,EAAMZ,KAAO,UAErC,CACHmB,MAAO,GAAGnB,MACVqB,OAAQ,GAAGrB,MACX,mBAAoC,YAAhBY,EAAMjB,MAAsB,UAAYiB,EAAMjB"}