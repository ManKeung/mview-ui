{"version":3,"file":"pages-modal-modal.bb76e11d.js","sources":["../../../../../uni_modules/mview-ui/components/m-modal/props.ts","../../../../../uni_modules/mview-ui/components/m-modal/m-modal.vue","../../../../../pages/modal/modal.vue"],"sourcesContent":["export default {\n    // 是否展示modal\n    show: {\n        type: Boolean,\n        default: uni.$m.props.modal.show\n    },\n    // 标题\n    title: {\n        type: [String],\n        default: uni.$m.props.modal.title\n    },\n    // 弹窗内容\n    content: {\n        type: String,\n        default: uni.$m.props.modal.content\n    },\n    // 确认文案\n    confirmText: {\n        type: String,\n        default: uni.$m.props.modal.confirmText\n    },\n    // 取消文案\n    cancelText: {\n        type: String,\n        default: uni.$m.props.modal.cancelText\n    },\n    // 是否显示确认按钮\n    showConfirmButton: {\n        type: Boolean,\n        default: uni.$m.props.modal.showConfirmButton\n    },\n    // 是否显示取消按钮\n    showCancelButton: {\n        type: Boolean,\n        default: uni.$m.props.modal.showCancelButton\n    },\n    // 确认按钮颜色\n    confirmColor: {\n        type: String,\n        default: uni.$m.props.modal.confirmColor\n    },\n    // 取消文字颜色\n    cancelColor: {\n        type: String,\n        default: uni.$m.props.modal.cancelColor\n    },\n    // 对调确认和取消的位置\n    buttonReverse: {\n        type: Boolean,\n        default: uni.$m.props.modal.buttonReverse\n    },\n    // 是否开启缩放效果\n    zoom: {\n        type: Boolean,\n        default: uni.$m.props.modal.zoom\n    },\n    // 是否允许点击遮罩关闭modal\n    closeOnClickOverlay: {\n        type: Boolean,\n        default: uni.$m.props.modal.closeOnClickOverlay\n    },\n    // 给一个负的margin-top，往上偏移，避免和键盘重合的情况\n    negativeTop: {\n        type: [String, Number],\n        default: uni.$m.props.modal.negativeTop\n    },\n    // modal宽度，不支持百分比，可以数值，px，rpx单位\n    width: {\n        type: [String, Number],\n        default: uni.$m.props.modal.width\n    }\n}\n","<template>\n    <m-popup\n        mode=\"center\"\n        :zoom=\"props.zoom\"\n        :show=\"props.show\"\n        :custom-style=\"{\n            borderRadius: '6px',\n            overflow: 'hidden',\n            marginTop: `-${$m.addUnit(props.negativeTop)}`\n        }\"\n        :closeOnClickOverlay=\"props.closeOnClickOverlay\"\n        :safeAreaInsetBottom=\"false\"\n        :duration=\"400\"\n        @click=\"handleClick\"\n    >\n        <view\n            class=\"m-modal\"\n            :style=\"{\n                width: $m.addUnit(props.width)\n            }\"\n        >\n            <text v-if=\"props.title\" class=\"m-modal__title\">{{ title }}</text>\n            <view\n                class=\"m-modal__content\"\n                :style=\"{\n                    paddingTop: `${title ? 12 : 25}px`\n                }\"\n            >\n                <slot>\n                    <text class=\"m-modal__content__text\">{{ props.content }}</text>\n                </slot>\n\n            </view>\n            <view v-if=\"$slots.confirmButton\" class=\"m-modal__button-group--confirm-button\">\n                <slot name=\"confirmButton\"></slot>\n            </view>\n            <template v-else>\n                <m-line></m-line>\n                <view\n                    class=\"m-modal__button-group\"\n                    :style=\"{\n                        flexDirection: props.buttonReverse ? 'row-reverse' : 'row'\n                    }\"\n                >\n                    <view\n                        v-if=\"props.showCancelButton\"\n                        class=\"m-modal__button-group__wrapper m-modal__button-group__wrapper--cancel\"\n                        :hover-stay-time=\"150\"\n                        hover-class=\"m-modal__button-group__wrapper--hover\"\n                        :class=\"[props.showCancelButton && !props.showConfirmButton && 'u-modal__button-group__wrapper--only-cancel']\"\n                        @tap=\"handleCancel\"\n                    >\n                        <text\n                            class=\"m-modal__button-group__wrapper__text\"\n                            :style=\"{\n                                color: props.cancelColor\n                            }\"\n                        >\n                            {{ props.cancelText }}\n                        </text>\n                    </view>\n                    <m-line\n                        v-if=\"props.showConfirmButton && props.showCancelButton\"\n                        direction=\"column\"\n                    ></m-line>\n                    <view\n                        v-if=\"props.showConfirmButton\"\n                        class=\"m-modal__button-group__wrapper m-modal__button-group__wrapper--confirm\"\n                        :hover-stay-time=\"150\"\n                        hover-class=\"m-modal__button-group__wrapper--hover\"\n                        :class=\"[!props.showCancelButton && props.showConfirmButton && 'u-modal__button-group__wrapper--only-confirm']\"\n                        @tap=\"handleConfirm\"\n                    >\n                        <text\n                            class=\"m-modal__button-group__wrapper__text\"\n                            :style=\"{\n                                color: props.confirmColor\n                            }\"\n                        >\n                            {{ props.confirmText }}\n                        </text>\n                    </view>\n                </view>\n            </template>\n        </view>\n    </m-popup>\n</template>\n\n<script lang=\"ts\" setup>\nimport { useSlots, computed } from 'vue'\nimport Props from './props'\n\nconst props = defineProps(Props)\nconst $slots = useSlots()\nconst emits = defineEmits(['confirm', 'cancel', 'close'])\n\n// 点击确定按钮\nconst handleConfirm = () => {\n    emits('confirm')\n}\n\n// 点击取消按钮\nconst handleCancel = () => {\n    emits('cancel')\n}\n\n// 点击遮罩\n// 从原理上来说，modal的遮罩点击，并不是真的点击到了遮罩\n// 因为modal依赖于popup的中部弹窗类型，中部弹窗比较特殊，虽有然遮罩，但是为了让弹窗内容能flex居中\n// 多了一个透明的遮罩，此透明的遮罩会覆盖在灰色的遮罩上，所以实际上是点击不到灰色遮罩的，popup内部在\n// 透明遮罩的子元素做了.stop处理，所以点击内容区，也不会导致误触发\n\nconst handleClick = () => {\n    emits('close')\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../libs/css/components.scss\";\n$m-modal-border-radius: 6px;\n\n.m-modal {\n    width: 650rpx;\n    border-radius: $m-modal-border-radius;\n    overflow: hidden;\n\n    .line {\n        margin: 0px;\n        border-bottom: 1px solid rgb(214, 215, 217);\n        width: 100%;\n        transform: scaleY(0.5);\n        border-top-color: rgb(214, 215, 217);\n        border-right-color: rgb(214, 215, 217);\n        border-left-color: rgb(214, 215, 217);\n    }\n\n    &__title {\n        font-size: 16px;\n        font-weight: bold;\n        color: $m-content-color;\n        text-align: center;\n        padding-top: 25px;\n    }\n\n    &__content {\n        padding: 12px 25px 25px 25px;\n        @include flex(column);\n        justify-content: center;\n\n        &__text {\n            font-size: 15px;\n            color: $m-content-color;\n            flex: 1;\n        }\n    }\n\n    &__button-group {\n        @include flex;\n\n        &--confirm-button {\n            flex-direction: column;\n            padding: 0px 25px 15px 25px;\n        }\n\n        &__wrapper {\n            flex: 1;\n            @include flex;\n            justify-content: center;\n            align-items: center;\n            height: 48px;\n\n            &--confirm,\n            &--only-cancel {\n                border-bottom-right-radius: $m-modal-border-radius;\n            }\n\n            &--cancel,\n            &--only-confirm {\n                border-bottom-left-radius: $m-modal-border-radius;\n            }\n\n            &--hover {\n                background-color: $m-bg-color;\n            }\n\n            &__text {\n                color: $m-content-color;\n                font-size: 16px;\n                text-align: center;\n            }\n        }\n    }\n}\n</style>\n","<template>\n    <view>\n        <m-common title=\"模态框\" />\n        <m-cell-group border>\n            <m-cell\n                title=\"基本使用\"\n                is-link\n                @click=\"handleClick\"\n            />\n            <m-cell\n                title=\"展示取消按钮\"\n                is-link\n                @click=\"handleClick(1)\"\n            />\n        </m-cell-group>\n        <m-modal\n            :show=\"show\"\n            title=\"标题\"\n            content=\"感谢使用mView作为你项目UI框架\"\n            close-on-click-overlay\n            :show-cancel-button=\"cancle\"\n            @confirm=\"show = false\"\n            @cancel=\"show = false\"\n        />\n    </view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue'\n\nconst show = ref(false)\nconst cancle = ref(false)\n\nconst handleClick = index => {\n    show.value = true\n    cancle.value = index === 1\n}\n</script>\n\n<style>\n\n</style>\n"],"names":["show","type","Boolean","default","uni","$m","props","modal","title","String","content","confirmText","cancelText","showConfirmButton","showCancelButton","confirmColor","cancelColor","buttonReverse","zoom","closeOnClickOverlay","negativeTop","Number","width","$slots","useSlots","handleConfirm","handleCancel","handleClick","ref","cancle","value","index"],"mappings":"uiBAAe,CAEXA,KAAM,CACFC,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMP,MAGhCQ,MAAO,CACHP,KAAM,CAACQ,QACPN,QAASC,IAAIC,GAAGC,MAAMC,MAAMC,OAGhCE,QAAS,CACLT,KAAMQ,OACNN,QAASC,IAAIC,GAAGC,MAAMC,MAAMG,SAGhCC,YAAa,CACTV,KAAMQ,OACNN,QAASC,IAAIC,GAAGC,MAAMC,MAAMI,aAGhCC,WAAY,CACRX,KAAMQ,OACNN,QAASC,IAAIC,GAAGC,MAAMC,MAAMK,YAGhCC,kBAAmB,CACfZ,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMM,mBAGhCC,iBAAkB,CACdb,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMO,kBAGhCC,aAAc,CACVd,KAAMQ,OACNN,QAASC,IAAIC,GAAGC,MAAMC,MAAMQ,cAGhCC,YAAa,CACTf,KAAMQ,OACNN,QAASC,IAAIC,GAAGC,MAAMC,MAAMS,aAGhCC,cAAe,CACXhB,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMU,eAGhCC,KAAM,CACFjB,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMW,MAGhCC,oBAAqB,CACjBlB,KAAMC,QACNC,QAASC,IAAIC,GAAGC,MAAMC,MAAMY,qBAGhCC,YAAa,CACTnB,KAAM,CAACQ,OAAQY,QACflB,QAASC,IAAIC,GAAGC,MAAMC,MAAMa,aAGhCE,MAAO,CACHrB,KAAM,CAACQ,OAAQY,QACflB,QAASC,IAAIC,GAAGC,MAAMC,MAAMe,uECwB9BC,EAASC,IAITC,EAAgB,OACZ,YAIJC,EAAe,OACX,WASJC,EAAc,OACV,0tECnFJ3B,EAAO4B,GAAI,GACXC,EAASD,GAAI,GAEbD,QACGG,OAAQ,IACNA,MAAkB,IAAVC"}